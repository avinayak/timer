<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>Timer</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/css/bootstrap.min.css" rel="stylesheet">

    <style type="text/css">
        .outer {
            display: table;
            position: absolute;
            height: 100%;
            width: 100%;
        }

        .middle {
            display: table-cell;
            vertical-align: middle;
        }

        .inner {
            margin-left: auto;
            margin-right: auto; 
        }
        .t-counter-types{
            border: none;
            border-bottom: 1px solid #aaa;
            border-radius: 0px;
            margin-bottom: 2px;
        }
        .t-select{
            width:auto;
            font-size: 74px;
            height: auto;
            border: none;
            padding: 0px;
            border-bottom: 1px solid #aaa;
            border-radius: 0px;
        }
        .t-colonsep{
            font-size: 74px;
            color: #555;
        }
        .t-sample-link{
            text-align: right;
        }
        .t-static-text{
            padding: 20px;
        }
        #t-uppertext{
            margin-bottom: 20px;          
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.js"></script>
    <script src="//angular-ui.github.io/ui-router/release/angular-ui-router.js"></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js'></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap.js"></script>
    <script src='//cdnjs.cloudflare.com/ajax/libs/angular-moment/1.0.0-beta.6/angular-moment.min.js'></script>
    <script>
      var app = angular.module('app', ["ui.router",'angularMoment']);
      app.config(function($stateProvider, $urlRouterProvider){
        function range(l,h,s){
          if(!h)
          {
            h=l;l=0;
          }
          var list = [];
          for (var i = l; i <= h; i++) {
              if(!s || i>=10)
                list.push(i);
              else
                list.push('0'+i);
          }
          return list;
        }

        $urlRouterProvider.otherwise("/");
        
        $stateProvider
          .state('index', {
              url: "/",
              templateUrl: "watchmaker.html",
              controller:function ($scope,$interval) {
                $scope.countertypes=[
                  {type:'hours',text:'Hours'},
                  {type:'days',text:'Days'},
                  {type:'years',text:'Years'},
                ];
                $scope.dates = range(1,31);
                $scope.years = range(1990,2100);
                $scope.hours = range(1,12,'pad');
                $scope.minutes = range(0,59,'pad');
                $scope.seconds = range(0,59,'pad');
                $scope.months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Nov','Dec'];
                $scope.periods = ['AM','PM'];
                $scope.sdate = $scope.dates[0];
                $scope.syear = $scope.years[0];
                $scope.shour = $scope.hours[0];
                $scope.sminute = $scope.minutes[0];
                $scope.ssecond = $scope.seconds[0];
                $scope.smonth = $scope.months[0];
                $scope.speriod = $scope.periods[0];
                $scope.stype = $scope.countertypes[0].type;

                $scope.diff = 0;
                $scope.fromto = "from";
                $scope.$watch('[smonth,sdate,syear,shour,smiute,ssecond,speriod]', function (newv, oldv) {
                  $scope.mstime = moment(newv[0]+"/"+newv[1]+"/"+newv[2]+" "+newv[3]+":"+newv[4]+":"+newv[5]+" "+newv[6], "MMMM/D/YYYY hh:mm:ss a").valueOf();
                  $scope.timenow=moment().valueOf();
                  if($scope.mstime-$scope.timenow > 0){
                      $scope.fromto="to";
                  }else{
                      $scope.fromto="from";
                  }
                }, true);

                $interval(function() {
                  $scope.timenow=moment().valueOf();
                  $scope.diff=$scope.mstime-$scope.timenow;
                  $scope.daysfrom=(($scope.diff)/1000/60/60/24/365).toFixed(9);
                },100);

              }
          })
          .state('timer', {
            url: "/t",
            templateUrl: "watch.html",
            controller: function($scope){
              $scope.items = ["A", "List", "Of", "Items"];
            }
          });
      });
    </script>

</head>
<body >
    <div class="outer">
        <div class="middle">
            <div class="inner container">
                <div ui-view></div> 
            </div>
        </div>
    </div>
</body>
</html>